# 北京地铁漫游游戏

## 项目介绍

北京地铁漫游游戏是一个基于北京地铁网络的路径规划游戏，玩家需要使用手中的地铁站点卡牌，找出从起点站到终点站的正确路径。游戏支持两种模式：单人漫游和单人漫游出题版。

## 游戏模式

### 单人漫游模式

在单人漫游模式中，系统会随机选择起点站和终点站，并生成一条正确路径。玩家需要从手中的地铁牌中选择正确的站点，按顺序连接起点和终点。

- 游戏会自动发放10张地铁牌
- 玩家需要按照正确的线路顺序选择站点
- 相邻站点必须在同一条地铁线路上
- 完成一条路径后可以进入下一题

### 单人漫游出题版模式

在出题版模式中，玩家可以自行选择起点站和终点站，系统会根据选择生成一条可行的路径。这种模式更具挑战性，适合熟悉北京地铁网络的玩家。

- 玩家可以自由选择起点站和终点站
- 系统会发放15张地铁牌
- 玩家需要找出一条有效路径
- 可以使用提示功能获取路径中的站点信息

## 游戏特点

- **模块化设计**：代码采用模块化结构，各功能模块相互独立，便于维护和扩展
- **优化的路径查找算法**：优先考虑换乘站作为搜索节点，提高路径查找效率
- **完整的地铁数据**：包含北京地铁29条线路522座车站的最新数据
- **多难度级别**：提供简单、中等、困难三种难度级别，适合不同水平的玩家
- **提示功能**：每局游戏有3次提示机会，可以获取正确路径中的随机站点信息

## 如何开始

1. 打开`index.html`文件启动游戏
2. 选择游戏模式和难度级别
3. 点击"开始游戏"按钮
4. 在单人漫游模式中，系统会自动选择起点站和终点站
5. 在出题版模式中，需要手动选择起点站和终点站
6. 从手中的地铁牌中选择站点，构建从起点到终点的路径
7. 完成后点击"下一题"按钮继续游戏

## 技术实现

- **metro_data.js**：地铁数据库，包含站点和线路信息
- **path_finder.js**：路径查找算法，优化的广度优先搜索
- **game_utils.js**：游戏公共工具函数
- **solo_exploration.js**：单人漫游模式实现
- **solo_exploration_creator.js**：单人漫游出题版模式实现
- **index.js**：主入口文件，整合各模块功能

## 未来计划

- 添加多人对战模式
- 增加更多游戏玩法
- 优化UI界面，提供更好的用户体验
- 添加成就系统和排行榜功能

现在开始开发地铁漫游的第5个模式”地铁漫游（真人对战）”
为了方便实现和维护地铁牌相关的功能，我建议地铁漫游（真人对战）相关代码和页面设计单独一套，以便开发及维护。
地铁牌组：与地铁漫游（AI对战）一致，地铁站数据库中属性cardmode为1的所有地铁站组成的牌，以及5张出租车牌和5张公交车牌。
出牌阶段：与地铁漫游（AI对战）规则一致，也是4条
1、坐地铁：打出1张或者2张地铁牌，每张牌依次放于桌面地铁牌的上面，要求打出的地铁牌上的线路与上一张地铁牌相连，否则不能打出
2、乘出租：打出功能牌“出租车”，此时从牌堆中摸一张牌；如果有地铁牌，可以选择继续出牌，打出任意1张地铁牌（不受地铁牌线路必须与上一张地铁牌相连的限制）
3、坐公交：打出功能牌“公交车”，此时可以将桌面上的最后一张地铁牌与倒数第二张地铁牌换位置；如果有地铁牌，可以选择继续出牌，打出一张地铁牌，该地铁要求打出的地铁牌上的线路与上一张地铁牌相连
4、摸牌：从牌堆中摸一张牌。如果之前牌堆摸完，则将之前出过的牌重新洗牌放入牌堆。
游戏结束条件：
一名玩家出完自己的全部手牌即获胜，即在出牌阶段出完最后一张地铁牌，或者是最后一张出租车牌，或者是最后一张公交车牌。
真人对战相关改动：
1、游戏会给玩家起个默认名字，规则为：玩家+随机2位数字，支持用户手动修改
2、游戏支持2-4人对战，第一个玩家点击创建游戏，则以该玩家作为主服务器创建游戏，局域网内其他玩家可以点击搜索游戏，找到玩家名字的游戏并点击加入，同时主服务器能提示玩家加入。
3、每个加入的玩家按照出牌顺序出牌，每个人的手牌、其他玩家手牌数量、牌堆状态、当前回合等根据每个玩家的页面显示
4、在回合内玩家可以出牌，默认出牌时间60s；出牌超时默认执行摸牌操作；在回合外玩家只能等待玩家出牌，不能进行其他操作

